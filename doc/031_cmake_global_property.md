# 第 031 讲：CMake 全局属性
- [第 031 讲：CMake 全局属性](#第-031-讲cmake-全局属性)

上一讲，我们通过 CMake 设置属性和获取属性两个命令的学习，对 CMake 属性的概念有了基本的认识。本讲我们一起来学习 CMake 全局属性相关的知识。

大家好，我是 eg，欢迎来到我的 CMake 课程。

全局属性与整个项目的构建相关。它们通常用于修改构建工具的启动方式或其他行为、定义项目文件的结构方式以及提供一定程度的构建级信息。 

在 CMake 的官方文档中，我们可以看到 CMake 预定于了大量的全局属性，这些属性我们大多数情况下不会通过 set_porperty() 命令去更改它们的值，但是在项目中有时我们会使用 get_property() 命令去获取这些属性的值，帮助我们对 CMake 项目进行更好的组织和管理。

对于获取 CMake 全局属性，除了 get_property() 命令，CMake 还为我们提供了一个简化版本的命令：get_cmake_property()，在项目中也建议使用这个命令。

get_cmake_property() 命令可以获取任何类型全局属性的值，同时它也能获取一些行为和全局属性类似的属性值，这些属性称为伪属性，并且伪属性的值只能通过 get_cmake_property() 命令获取。

下面我们先来看看如何使用 get_cmake_property() 命令获取伪属性的值。

- VARIABLES
    - 返回所有常规（即非缓存）变量的列表。因为常规变量很多，我们可以使用一个 foreach() 命令将获取到的属性值一个一个地打印出来。在这里我们可以看到以 CMAKE_ 开头的 CMake 预定义变量，以 PROJECT_ 开头的当调用 project() 命令后自动生成的变量，以 _ 开头的 CMake 内部变量，以及以项目名字(study_cmake)加下划线开头的和项目相关的变量。我们可以直接打印这些变量的值。
- CACHE_VARIABLES
    - 返回所有缓存变量的列表。 同样也有和项目名字相关的缓存变量。
- COMMANDS
    - 返回所有已定义的命令、函数和宏的列表。命令由 CMake 预先定义，而函数和宏可以由 CMake（通常通过模块）或项目本身定义。一些返回的名称可能对应于未记录或不打算供项目直接使用的内部实体。这些名称可能以不同于最初定义的大小写形式返回。 
- MACROS
    - 仅返回已定义宏的列表。这将是 COMMANDS 伪属性的子集，但请注意名称的大小写可能与 COMMANDS 伪属性报告的不同。
- COMPONENTS
    - 返回由 install() 命令定义的所有组件的列表，由于 install() 命令我们现在还没有学到，本讲不对其进行演示。 

最后我们看两个使用 get_cmake_property() 命令获取全局属性的例子，CMake 官网列出的全局属性建议大家都看看其含义，对以后更好地使用 CMake 全局属性有很大帮助。

- CMAKE_C_KNOWN_FEATURES
    - 获取当前 CMake 版本已知的 C 标准和特性。
- FIND_LIBRARY_USE_LIB64_PATHS
    - 获取 find_library() 命令是否应该自动搜索 lib64 目录。


本讲内容比较简单，但大家一定要动手实践。千万不要一看就会，一做就错。

感谢大家学习到这里，记得点赞分享哦，你们的认可是我最大的动力。我们下期见！